var Flexie=function(x,E){function F(a){if(a)a=a.replace(va,w).replace(wa,w);return a}function g(a,d){var c,b=0,e=a?a.length:P;if(e===P)for(c in a){if(a.hasOwnProperty(c))if(d.call(a[c],c,a[c])===I)break}else for(c=a[0];b<e&&d.call(c,b,c)!==I;c=a[++b]);}function xa(){var a;g(X,function(d,c){if(x[d]&&!a)if(a=eval(c.s.replace("*",d))){Y=d;return false}});return a}function Z(a,d){a="on"+a;var c=x[a];x[a]=typeof x[a]!=="function"?d:function(){c&&c();d()}}function $(a){var d=a.nodeName.toLowerCase();if(a.id)d+=
"#"+a.id;else if(a.FLX_DOM_ID)d+="["+aa+"='"+a.FLX_DOM_ID+"']";return d}function T(a){if(!a.FLX_DOM_ID){U+=1;a.FLX_DOM_ID=U;a.setAttribute(aa,a.FLX_DOM_ID)}}function ya(a){var d=[],c,b,e,f,h,i;a=a.replace(za,w);a=a.replace(/\s?(\{|\:|\})\s?/g,Q);a=a.split(ba);g(a,function(k,l){if(l){c=[l,ba].join(w);if((b=/(\@media[^\{]+\{)?(.*)\{(.*)\}/.exec(c))&&b[3]){e=b[2];f=b[3].split(";");i=[];g(f,function(n,o){h=o.split(":");h.length&&h[1]&&i.push({property:h[0],value:h[1]})});e&&i.length&&d.push({selector:e,
properties:i})}}});return d}function Aa(a){var d,c,b,e,f,h=/\s?,\s?/,i,k,l={},n={};i=function(o,p,m,j){var q={selector:F(o),properties:[]};g(p.properties,function(r,u){q.properties.push({property:F(u.property),value:F(u.value)})});if(m&&j)q[m]=j;return q};k=function(o,p,m,j){var q=m&&j?l[o]:n[o],r;if(q){g(p.properties,function(u,A){g(q.properties,function(J,B){if(A.property===B.property){r=J;return false}});if(r)q.properties[r]=A;else q.properties.push(A)});if(m&&j)q[m]=j}else if(m&&j)l[o]=i(o,p,
m,j);else n[o]=i(o,p,t,t)};g(a,function(o,p){d=F(p.selector).replace(h,",").split(h);g(d,function(m,j){j=F(j);c=p.properties;g(c,function(q,r){b=F(r.property);e=F(r.value);if(b){f=b.replace("box-",w);switch(f){case "display":e==="box"&&k(j,p,t,t);break;case "orient":case "align":case "direction":case "pack":k(j,p,t,t);break;case "flex":case "flex-group":case "ordinal-group":k(j,p,f,e)}}})})});g(n,function(o,p){y.push(p)});g(l,function(o,p){ca.push(p)});return{boxes:y,children:ca}}function da(a,d,
c){var b,e,f=[];g(c,function(h,i){if(i.selector){b=d(i.selector);b=b[0]?b:[b];b[0]&&g(b,function(k,l){if(l.nodeName!==P)switch(l.nodeName.toLowerCase()){case "script":case "style":case "link":break;default:if(l.parentNode===a){T(l);e={};g(i,function(n){e[n]=i[n]});e.match=l;f.push(e)}}})}else{T(i);f.push({match:i,selector:$(i)})}});return f}function Ba(a){g(a,function(d,c){a[d]=c||Ca[d]});return a}function Da(a){var d,c,b,e,f,h,i,k,l,n,o,p,m,j,q={},r,u,A,J="["+R+"]";if(a){g(a.boxes,function(B,C){C.selector=
F(C.selector);d=C.selector;c=C.properties;h=i=k=l=n=t;g(c,function(Ea,G){b=F(G.property);e=F(G.value);if(b){f=b.replace("box-",w);switch(f){case "display":if(e==="box")h=e;break;case "orient":i=e;break;case "align":k=e;break;case "direction":l=e;break;case "pack":n=e}}});o=K;p=o(C.selector);p=p[0]?p:[p];g(p,function(Ea,G){if(G.nodeType){T(G);m=da(G,o,a.children);A=d+" "+J;j={target:G,selector:d,properties:c,children:m,display:h,orient:i,align:k,direction:l,pack:n,nested:A};if(r=q[G.FLX_DOM_ID])g(j,
function(L,N){switch(L){case "selector":if(N&&!RegExp(N).test(r[L]))r[L]+=", "+N;break;case "children":g(j[L],function(Wa,ea){u=I;g(r[L],function(Xa,Fa){if(ea.match.FLX_DOM_ID===Fa.match.FLX_DOM_ID)u=s});u||r[L].push(ea)});break;default:if(N)r[L]=N}});else{q[G.FLX_DOM_ID]=Ba(j);q[G.FLX_DOM_ID].target.setAttribute(R,s)}}})});fa=K(J);y={};g(fa,function(B,C){y[C.FLX_DOM_ID]=q[C.FLX_DOM_ID]});g(y,function(B,C){C.display==="box"&&new z.box(C)})}}function ga(a,d,c){c=c.replace(c.charAt(0),c.charAt(0).toUpperCase());
var b=a["offset"+c]||0;b&&g(d,function(e,f){f=parseFloat(a.currentStyle[f]);isNaN(f)||(b-=f)});return b}function ha(a,d){var c,b,e=a.currentStyle&&a.currentStyle[d],f=a.style;if(!ia.test(e)&&Ga.test(e)){c=f.left;b=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;f.left=e||0;e=f.pixelLeft+"px";f.left=c||0;a.runtimeStyle.left=b}return e}function v(a,d,c){if(a!==P){if(x.getComputedStyle)a=x.getComputedStyle(a,t)[d];else if(Ha.test(d)){var b=a&&a.currentStyle?a.currentStyle[d]:0;if(!ia.test(b)){if(b===
"auto"||b==="medium"){switch(d){case "width":b=[ja,ka,la,ma];b=ga(a,b,d);break;case "height":b=[V,na,oa,pa];b=ga(a,b,d);break;default:b=ha(a,d)}a=b}else a=ha(a,d);b=a}a=b}else a=a.currentStyle[d];if(c){a=parseInt(a,10);if(isNaN(a))a=0}return a}}function Ia(a){return a.innerWidth||a.clientWidth}function Ja(a){return a.innerHeight||a.clientHeight}function W(a,d,c,b){var e=[];g(Ka,function(f,h){e.push((b?h:w)+d+":"+(!b?h:w)+c)});a.style.cssText+=e.join(";");return a}function D(a,d,c){g(a&&a[0]?a:[a],
function(b,e){if(e&&e.style)e.style[d]=c?c+"px":w})}function La(a){var d,c;a=a.replace(Ma,function(b,e){return"%"+e}).replace(/\s|\>|\+|\~/g,"%").split(/%/g);d={_id:100,_class:10,_tag:1};c=0;g(a,function(b,e){if(/#/.test(e))c+=d._id;else if(/\.|\[|\:/.test(e))c+=d._class;else if(/[a-zA-Z]+/.test(e))c+=d._tag});return c}function Na(a,d,c){var b=[],e,f=(c?"ordinal":"flex")+"Specificity";g(a,function(h,i){if(!c&&i.flex||c&&i["ordinal-group"]){i[f]=i[f]||La(i.selector);e=I;g(b,function(k,l){if(l.match===
i.match){if(l[f]<i[f])b[k]=i;e=s;return I}});e||b.push(i)}});return b}function S(a,d,c){var b={},e=[],f=0,h;a=Na(a,d,c);g(d,function(i,k){g(a,function(l,n){if(c){h=n["ordinal-group"]||"1";if(n.match===k){n.match.setAttribute("data-ordinal-group",h);b[h]=b[h]||[];b[h].push(n)}}else{h=n.flex||"0";if(n.match===k&&(!n[h]||n[h]&&parseInt(n[h],10)<=1)){f+=parseInt(h,10);b[h]=b[h]||[];b[h].push(n)}}});if(c&&!k.getAttribute("data-ordinal-group")){h="1";k.setAttribute("data-ordinal-group",h);b[h]=b[h]||[];
b[h].push({match:k})}});g(b,function(i){e.push(i)});e.sort(function(i,k){return k-i});return{keys:e,groups:b,total:f}}function Oa(){if(!qa){var a,d,c,b,e=E.body,f=E.documentElement;Z("resize",function(){c=x.innerWidth||f.innerWidth||f.clientWidth||e.clientWidth;b=x.innerHeight||f.innerHeight||f.clientHeight||e.clientHeight;if(a!==c||d!==b){z.updateInstance(t,t);a=c;d=b}});qa=s}}function ra(a){var d,c;g(a,function(b,e){d=e.style.width;c=e.style.height;e.style.cssText=w;e.style.width=d;e.style.height=
c})}function O(a,d){var c=[],b,e,f;e=0;for(f=d.length;e<f;e++)if(b=d[e])switch(b.nodeName.toLowerCase()){case "script":case "style":case "link":break;default:if(b.nodeType===1)c.push(b);else if(b.nodeType===3&&(b.isElementContentWhitespace||Pa.test(b.data))){a.removeChild(b);e--}}return c}function sa(a){var d=0;a=a.parentNode;for(var c;a.FLX_DOM_ID;){c=y[a.FLX_DOM_ID];c=S(c.children,O(a,a.childNodes),t);d+=c.total;c=s;a=a.parentNode}return{nested:c,flex:d}}function Qa(a,d){var c=a.parentNode,b;if(c.FLX_DOM_ID){c=
y[c.FLX_DOM_ID];g(c.properties,function(e,f){if(RegExp(d).test(f.property)){b=s;return I}})}return b}function Ra(a){a.flexMatrix&&g(a.children,function(d,c){c.flex=a.flexMatrix[d]});a.ordinalMatrix&&g(a.children,function(d,c){c["ordinal-group"]=a.ordinalMatrix[d]});return a}function Sa(a,d){var c=a.target;if(!c.FLX_DOM_ID)c.FLX_DOM_ID=c.FLX_DOM_ID||++U;if(!a.nodes)a.nodes=O(c,c.childNodes);if(!a.selector){a.selector=$(c);c.setAttribute(R,s)}if(!a.properties)a.properties=[];if(!a.children)a.children=
da(c,K,O(c,c.childNodes));if(!a.nested)a.nested=a.selector+" ["+R+"]";a.target=c;a._instance=d;return a}var z={},U=0,aa="data-flexie-id",R="data-flexie-parent",H,Y,X={NW:{s:"*.Dom.select"},DOMAssistant:{s:"*.$",m:"*.DOMReady"},Prototype:{s:"$$",m:"document.observe",p:"dom:loaded",c:"document"},YAHOO:{s:"*.util.Selector.query",m:"*.util.Event.onDOMReady",c:"*.util.Event"},MooTools:{s:"$$",m:"window.addEvent",p:"domready"},Sizzle:{s:"*"},jQuery:{s:"*",m:"*(document).ready"},dojo:{s:"*.query",m:"*.addOnLoad"}},
K,ia=/^-?\d+(?:px)?$/i,Ga=/^-?\d/,Ha=/width|height|margin|padding|border/,Ta=/(msie) ([\w.]+)/,za=/\t|\n|\r/g,Ua=/^max\-([a-z]+)/,Va=/^https?:\/\//i,va=/^\s\s*/,wa=/\s\s*$/,Pa=/^\s*$/,Ma=/\s?(\#|\.|\[|\:(\:)?[^first\-(line|letter)|before|after]+)/g,w="",ta=" ",Q="$1",ka="paddingRight",na="paddingBottom",ja="paddingLeft",V="paddingTop",ma="borderRightWidth",pa="borderBottomWidth",la="borderLeftWidth",oa="borderTopWidth",ba="}",Ka=" -o- -moz- -ms- -webkit- -khtml- ".split(ta),Ca={orient:"horizontal",
align:"stretch",direction:"inherit",pack:"start"},y=[],ca=[],fa,qa,s=true,I=false,t=null,P,M={IE:function(){var a,d=Ta.exec(x.navigator.userAgent.toLowerCase());if(d)a=parseInt(d[2],10);return a}()},ua;ua=function(){function a(m){return m.replace(k,function(j,q,r){j=r.split(",");g(j,function(u,A){A.replace(l,Q).replace(n,Q).replace(p,Q).replace(o,ta)});return q+j.join(",")})}function d(){if(x.XMLHttpRequest)return new x.XMLHttpRequest;try{return new x.ActiveXObject("Microsoft.XMLHTTP")}catch(m){return t}}
function c(m){var j=d();j.open("GET",m,I);j.send();return j.status===200?j.responseText:w}function b(m,j){if(m){if(Va.test(m))return j.substring(0,j.indexOf("/",8))===m.substring(0,m.indexOf("/",8))?m:t;if(m.charAt(0)==="/")return j.substring(0,j.indexOf("/",8))+m;var q=j.split("?")[0];if(m.charAt(0)!=="?"&&q.charAt(q.length-1)!=="/")q=q.substring(0,q.lastIndexOf("/")+1);return q+m}}function e(m){if(m)return c(m).replace(f,w).replace(h,function(j,q,r,u,A,J){j=e(b(r||A,m));return J?"@media "+J+" {"+
j+"}":j}).replace(i,function(j,q,r,u){r=r||w;return q?j:" url("+r+b(u,m,true)+r+") "});return w}var f=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,h=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))\s*([^;]*);/g,i=/(behavior\s*?:\s*)?\burl\(\s*(["']?)(?!data:)([^"')]+)\2\s*\)/g,k=/((?:^|(?:\s*})+)(?:\s*@media[^{]+{)?)\s*([^\{]*?[\[:][^{]+)/g,l=/([(\[+~])\s+/g,n=/\s+([)\]+~])/g,o=/\s+/g,p=/^\s*((?:[\S\s]*\S)?)\s*$/;return function(){var m,j,q;j=E.getElementsByTagName("BASE");var r=j.length>
0?j[0].href:E.location.href,u;j=0;for(q=E.styleSheets.length;j<q;j++)if((m=E.styleSheets[j])&&m.href!==t)if(m=b(m.href,r)){u=a(e(m));u=ya(u);u=Aa(u)}Da(u)}}();z.box=function(a){return this.renderModel(a)};z.box.prototype={properties:{boxModel:function(a,d,c){var b,e;a.style.display="block";if(M.IE===8)a.style.overflow="hidden";if(!c.cleared){selectors=c.selector.split(/\s?,\s?/);b=E.styleSheets;b=b[b.length-1];e="padding-top:"+(v(a,V,t)||"0.1px;");g(selectors,function(f,h){if(b.addRule)if(M.IE<8){a.style.zoom=
"1";if(M.IE===6)b.addRule(h.replace(/\>|\+|\~/g,""),e+"zoom:1;",0);else M.IE===7&&b.addRule(h,e+"display:inline-block;",0)}else{b.addRule(h,e,0);b.addRule(h+":before","content: '.';display: block;height: 0;overflow: hidden",0);b.addRule(h+":after","content: '.';display: block;height: 0;overflow: hidden;clear:both;",0)}else if(b.insertRule){b.insertRule(h+"{"+e+"}",0);b.insertRule(h+":after{content: '.';display: block;height: 0;overflow: hidden;clear:both;}",0)}});c.cleared=s}},boxDirection:function(a,
d,c){var b;if(c.direction==="reverse"&&!c.reversed||c.direction==="normal"&&c.reversed){d=d.reverse();g(d,function(e,f){a.appendChild(f)});d=K(c.nested);g(d,function(e,f){if((b=y[f.FLX_DOM_ID])&&b.direction==="inherit")b.direction=c.direction});c.reversed=!c.reversed}},boxOrient:function(a,d,c){var b;a={pos:"marginLeft",opp:"marginRight",dim:"width",out:"offsetWidth",func:Ia,pad:[ja,ka,la,ma]};b={pos:"marginTop",opp:"marginBottom",dim:"height",out:"offsetHeight",func:Ja,pad:[V,na,oa,pa]};H||g(d,function(e,
f){f.style[M.IE>=9?"cssFloat":"styleFloat"]="left";if(c.orient==="vertical"||c.orient==="block-axis")f.style.clear="left";if(M.IE===6)f.style.display="inline"});switch(c.orient){case "vertical":case "block-axis":this.props=b;this.anti=a;break;default:this.props=a;this.anti=b}},boxOrdinalGroup:function(a,d,c){var b,e;if(d.length){b=function(f){f=f.keys;g(c.reversed?f:f.reverse(),function(h,i){g(d,function(k,l){i===l.getAttribute("data-ordinal-group")&&a.appendChild(l)})})};e=S(c.children,d,s);e.keys.length>
1&&b(e)}},boxFlex:function(a,d,c){var b=this,e,f,h,i;if(d.length){e=function(k){var l=k.groups,n;g(k.keys,function(o,p){g(l[p],function(m,j){n=t;g(j.properties,function(q,r){if(Ua.test(r.property))n=parseFloat(r.value)});if(!n||j.match[b.props.out]>n)D(j.match,b.props.pos,t)})})};f=function(k){var l=0,n;g(d,function(o,p){l+=v(p,b.props.dim,s);g(b.props.pad,function(m,j){l+=v(p,j,s)});l+=v(p,b.props.pos,s);l+=v(p,b.props.opp,s)});n=a[b.props.out]-l;g(b.props.pad,function(o,p){n-=v(a,p,s)});return{whitespace:n,
ration:n/k.total}};h=function(k,l){var n=k.groups,o,p,m=l.ration,j,q,r;g(k.keys,function(u,A){j=m*A;g(n[A],function(J,B){if(B.match){o=B.match.getAttribute("data-flex");p=B.match.getAttribute("data-specificity");if(!o||p<=B.flexSpecificity){B.match.setAttribute("data-flex",A);B.match.setAttribute("data-specificity",B.flexSpecificity);q=v(B.match,b.props.dim,s);r=Math.max(0,q+j);D(B.match,b.props.dim,r)}}})})};i=S(c.children,d,t);if(i.total){c.hasFlex=s;e(i);c=f(i);h(i,c)}}},boxAlign:function(a,d,
c){var b=this,e,f,h=sa(a);if(!H&&!h.flex&&(c.orient==="vertical"||c.orient==="block-axis")){Qa(a,b.anti.dim)||D(a,b.anti.dim,t);D(d,b.anti.dim,t)}e=a[b.anti.out];g(b.anti.pad,function(i,k){e-=v(a,k,s)});switch(c.align){case "start":break;case "end":g(d,function(i,k){f=e-k[b.anti.out];f-=v(k,b.anti.opp,s);D(k,b.anti.pos,f)});break;case "center":g(d,function(i,k){f=(e-k[b.anti.out])/2;D(k,b.anti.pos,f)});break;default:g(d,function(i,k){switch(k.nodeName.toLowerCase()){case "button":case "input":case "select":break;
default:var l=0;g(b.anti.pad,function(n,o){l+=v(k,o,s);l+=v(a,o,s)});k.style[b.anti.dim]="100%";f=k[b.anti.out]-l;D(k,b.anti.dim,t);f=e;f-=v(k,b.anti.pos,s);g(b.anti.pad,function(n,o){f-=v(k,o,s)});f-=v(k,b.anti.opp,s);f=Math.max(0,f);D(k,b.anti.dim,f)}})}},boxPack:function(a,d,c){var b=this,e=0,f=0,h=0,i,k,l;l=d.length-1;g(d,function(n,o){e+=o[b.props.out];e+=v(o,b.props.pos,s);e+=v(o,b.props.opp,s)});f=v(d[0],b.props.pos,s);i=a[b.props.out]-e;g(b.props.pad,function(n,o){i-=v(a,o,s)});if(i<0)i=Math.max(0,
i);switch(c.pack){case "end":D(d[0],b.props.pos,h+f+i);break;case "center":if(h)h/=2;D(d[0],b.props.pos,h+f+Math.floor(i/2));break;case "justify":c=Math.floor((h+i)/l);l=c*l-i;for(h=d.length-1;h;){f=d[h];k=c;if(l){k++;l++}k=v(f,b.props.pos,s)+k;D(f,b.props.pos,k);h--}}a.style.overflow=""}},setup:function(a,d,c){var b=this,e,f;if(!(!a||!d||!c))if(H&&H.partialSupport){e=S(c.children,d,t);f=sa(a);d=O(a,a.childNodes);b.properties.boxOrient.call(b,a,d,c);if(!e.total||!K(c.nested).length){if(c.align===
"stretch"&&!H.boxAlignStretch&&(!f.nested||!f.flex))b.properties.boxAlign.call(b,a,d,c);c.pack==="justify"&&!H.boxPackJustify&&!e.total&&b.properties.boxPack.call(b,a,d,c)}}else H||g(b.properties,function(h,i){i.call(b,a,O(a,a.childNodes),c)})},trackDOM:function(a){Oa(this,a)},updateModel:function(a){var d=a.target,c=a.nodes;ra(c);if(a.flexMatrix||a.ordinalMatrix)a=Ra(a);this.setup(d,c,a);this.bubbleUp(d,a)},renderModel:function(a){var d=this,c=a.target,b=c.childNodes;if(!c.length&&!b)return false;
a=Sa(a,this);d.updateModel(a);x.setTimeout(function(){d.trackDOM(a)},0);return d},bubbleUp:function(a,d){for(var c,b=d.target.parentNode;b;){if(c=y[b.FLX_DOM_ID]){ra(c.nodes);this.setup(c.target,c.nodes,c)}b=b.parentNode}}};z.updateInstance=function(a,d){var c;if(a)if(c=y[a.FLX_DOM_ID])c._instance.updateModel(c);else c=new z.box(d);else g(y,function(b,e){e._instance.updateModel(e)})};z.getInstance=function(a){return y[a.FLX_DOM_ID]};z.destroyInstance=function(a){var d;d=function(c){c.target.FLX_DOM_ID=
t;c.target.style.cssText=w;g(c.children,function(b,e){e.match.style.cssText=w})};if(a)(a=y[a.FLX_DOM_ID])&&d(a);else{g(y,function(c,b){d(b)});y=[]}};z.flexboxSupport=function(){var a={},d,c=E.createElement("flxbox"),b;c.style.width=c.style.height="100px";c.innerHTML='<b style="margin: 0; padding: 0; display:block; width: 10px; height:50px"></b><b style="margin: 0; padding: 0; display:block; width: 10px; height:50px"></b><b style="margin: 0; padding: 0; display:block; width: 10px; height:50px"></b>';
W(c,"display","box",t);W(c,"box-align","stretch",s);W(c,"box-pack","justify",s);E.body.appendChild(c);d=c.firstChild.offsetHeight;g({boxAlignStretch:function(){return d===100},boxPackJustify:function(){var e=0;g(c.childNodes,function(f,h){e+=h.offsetLeft});return e===135}},function(e,f){b=f();if(!b)a.partialSupport=s;a[e]=b});E.body.removeChild(c);return~c.style.display.indexOf("box")?a:I};z.init=function(){z.flexboxSupported=H=z.flexboxSupport();if((!H||H.partialSupport)&&K)ua()};z.version="1.0.2";
(function(a){Y||(K=xa());var d,c,b;g(X,function(e,f){if(x[e]&&!d&&f.m){d=eval(f.m.replace("*",e));c=f.c?eval(f.c.replace("*",e)):x;b=[];if(d&&c){f.p&&b.push(f.p);b.push(a);d.apply(c,b);return false}}});d||Z("load",a)})(z.init);return z}(this,document);
